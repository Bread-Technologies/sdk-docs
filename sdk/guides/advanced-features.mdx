---
title: "Advanced Features"
description: "Advanced SDK capabilities and customization"
---

## Raw Response Access

Access raw HTTP response data:

<CodeGroup>

```python Python
response = client.repo.with_raw_response.list()

# Access response metadata
print(response.status_code)
print(response.headers.get('X-Custom-Header'))
print(response.http_response)

# Parse to get typed data
repos = response.parse()
print(repos.repos)
```

```typescript TypeScript
// Access raw response through the response object
const response = await client.repo.list();

// Access response metadata (if SDK exposes it)
console.log(response.statusCode);
console.log(response.headers?.['X-Custom-Header']);
console.log(response.rawResponse);

// Response data is already parsed
console.log(response.repos);
```

</CodeGroup>

**Available Properties**:
- `statusCode`: HTTP status code
- `headers`: Response headers
- `rawResponse`: Raw response object
- Response data is automatically parsed

---

## Streaming Responses

Stream response bodies instead of loading entirely into memory:

<CodeGroup>

```python Python
with client.repo.with_streaming_response.list() as response:
    print(response.headers.get("X-My-Header"))
    
    for line in response.iter_lines():
        print(line)
```

```typescript TypeScript
// Use fetch streaming API or SDK streaming support
const response = await fetch(apiUrl, {
  method: 'GET',
  headers: { Authorization: `Bearer ${apiKey}` },
});

console.log(response.headers.get('X-My-Header'));

const reader = response.body?.getReader();
const decoder = new TextDecoder();

if (reader) {
  while (true) {
    const { done, value } = await reader.read();
    if (done) break;
    
    const chunk = decoder.decode(value);
    const lines = chunk.split('\n');
    for (const line of lines) {
      if (line) console.log(line);
    }
  }
}
```

</CodeGroup>

**Async Streaming**:

<CodeGroup>

```python Python
async with client.repo.with_streaming_response.list() as response:
    async for line in response.iter_lines():
        print(line)
```

```typescript TypeScript
// Async streaming in TypeScript
async function streamResponse() {
  const response = await fetch(apiUrl, {
    method: 'GET',
    headers: { Authorization: `Bearer ${apiKey}` },
  });
  
  const reader = response.body?.getReader();
  const decoder = new TextDecoder();
  
  if (reader) {
    while (true) {
      const { done, value } = await reader.read();
      if (done) break;
      
      const chunk = decoder.decode(value);
      const lines = chunk.split('\n');
      for (const line of lines) {
        if (line) console.log(line);
      }
    }
  }
}

await streamResponse();
```

</CodeGroup>

---

## Custom HTTP Client

Override the HTTP client for proxies, custom transports, and advanced configurations:

<CodeGroup>

```python Python
import httpx
from aibread import Bread, DefaultHttpxClient

client = Bread(
    base_url="http://my-server.com:8083",
    http_client=DefaultHttpxClient(
        proxy="http://my-proxy.com:8080",
        transport=httpx.HTTPTransport(local_address="0.0.0.0")
    )
)
```

```typescript TypeScript
import Bread from '@aibread/sdk';
import { Agent } from 'https';

// Custom HTTP client configuration
const client = new Bread({
  baseURL: 'http://my-server.com:8083',
  httpClient: {
    // Configure custom agent, proxy, etc.
    agent: new Agent({
      keepAlive: true,
    }),
  },
});
```

</CodeGroup>

### Proxy Configuration

<CodeGroup>

```python Python
import httpx
from aibread import Bread, DefaultHttpxClient

client = Bread(
    http_client=DefaultHttpxClient(
        proxy="http://proxy.example.com:8080"
    )
)

# With proxy authentication
proxies = {
    "http://": "http://user:pass@proxy.example.com:8080",
    "https://": "http://user:pass@proxy.example.com:8080"
}
client = Bread(
    http_client=DefaultHttpxClient(proxy=proxies)
)
```

```typescript TypeScript
import Bread from '@aibread/sdk';
import { HttpsProxyAgent } from 'https-proxy-agent';

// Simple proxy
const client = new Bread({
  httpClient: {
    agent: new HttpsProxyAgent('http://proxy.example.com:8080'),
  },
});

// With proxy authentication
const authenticatedClient = new Bread({
  httpClient: {
    agent: new HttpsProxyAgent('http://user:pass@proxy.example.com:8080'),
  },
});
```

</CodeGroup>

---

## Timeout Configuration

<CodeGroup>

```python Python
from aibread import Bread

# Simple timeout (seconds)
client = Bread(timeout=20.0)
```

```typescript TypeScript
import Bread from '@aibread/sdk';

// Simple timeout (milliseconds)
const client = new Bread({ timeout: 20000 });
```

</CodeGroup>

**Granular Control**:

<CodeGroup>

```python Python
import httpx
from aibread import Bread

client = Bread(
    timeout=httpx.Timeout(
        60.0,         # Total timeout
        connect=2.0,  # Connection timeout
        read=5.0,     # Read timeout
        write=10.0    # Write timeout
    )
)
```

```typescript TypeScript
import Bread from '@aibread/sdk';

const client = new Bread({
  timeout: {
    total: 60000,    // Total timeout (ms)
    connect: 2000,   // Connection timeout (ms)
    read: 5000,      // Read timeout (ms)
    write: 10000,    // Write timeout (ms)
  },
});
```

</CodeGroup>

**Per-Request Override**:

<CodeGroup>

```python Python
client = Bread()

# Override for single request
repos = client.with_options(timeout=5.0).repo.list()
```

```typescript TypeScript
const client = new Bread();

// Override for single request (if SDK supports it)
const repos = await client.repo.list({ timeout: 5000 });
```

</CodeGroup>

**Default**: 60 seconds

---

## Retry Configuration

<CodeGroup>

```python Python
from aibread import Bread

# Default: 2 retries
client = Bread(max_retries=2)

# Disable retries
client = Bread(max_retries=0)

# More aggressive retries
client = Bread(max_retries=5)
```

```typescript TypeScript
import Bread from '@aibread/sdk';

// Default: 2 retries
const client = new Bread({ maxRetries: 2 });

// Disable retries
const clientNoRetries = new Bread({ maxRetries: 0 });

// More aggressive retries
const clientAggressive = new Bread({ maxRetries: 5 });
```

</CodeGroup>

**Per-Request Override**:

<CodeGroup>

```python Python
client = Bread()

repos = client.with_options(max_retries=3).repo.list()
```

```typescript TypeScript
const client = new Bread();

// Override for single request (if SDK supports it)
const repos = await client.repo.list({ maxRetries: 3 });
```

</CodeGroup>

**Auto-retried Errors**:
- 408 Request Timeout
- 409 Conflict
- 429 Rate Limit
- â‰¥500 Server Errors
- Connection errors

**Retry Strategy**: Exponential backoff with jitter

---

## Request Customization

### Extra Headers

<CodeGroup>

```python Python
repos = client.repo.list(
    extra_headers={"X-Custom-Header": "value"}
)
```

```typescript TypeScript
const repos = await client.repo.list({
  extraHeaders: { 'X-Custom-Header': 'value' },
});
```

</CodeGroup>

### Extra Query Parameters

<CodeGroup>

```python Python
repos = client.repo.list(
    extra_query={"custom_param": "value"}
)
```

```typescript TypeScript
const repos = await client.repo.list({
  extraQuery: { custom_param: 'value' },
});
```

</CodeGroup>

### Extra Body Fields

<CodeGroup>

```python Python
repo = client.repo.set(
    repo_name="my_repo",
    extra_body={"additional_field": "value"}
)
```

```typescript TypeScript
const repo = await client.repo.create({
  repo_name: 'my_repo',
  extraBody: { additional_field: 'value' },
});
```

</CodeGroup>

---

## Undocumented Endpoints

Make requests to undocumented endpoints:

<CodeGroup>

```python Python
import httpx

response = client.post(
    "/custom/endpoint",
    cast_to=httpx.Response,
    body={"my_param": True}
)

print(response.status_code)
```

```typescript TypeScript
// Use fetch or SDK's low-level request method if available
const response = await fetch(`${baseURL}/custom/endpoint`, {
  method: 'POST',
  headers: {
    Authorization: `Bearer ${apiKey}`,
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({ my_param: true }),
});

console.log(response.status);
```

</CodeGroup>

---

## Undocumented Response Properties

Access undocumented fields in responses:

<CodeGroup>

```python Python
response = client.repo.get("my_repo")

# Access unknown property
extra_field = response.unknown_prop

# Get all extra fields
extras = response.model_extra
```

```typescript TypeScript
const response = await client.repo.get('my_repo');

// Access unknown property (TypeScript may require type assertion)
const extraField = (response as any).unknownProp;

// Get all extra fields if SDK exposes them
const extras = (response as any).extraFields || {};
```

</CodeGroup>

---

## Context Manager Usage

Automatically manage HTTP connections:

<CodeGroup>

```python Python
from aibread import Bread

# Sync context manager
with Bread() as client:
    repos = client.repo.list()
# HTTP client is now closed
```

```typescript TypeScript
import Bread from '@aibread/sdk';

// TypeScript SDK manages connections automatically
// No explicit cleanup needed - connections are managed by the runtime
const client = new Bread();
const repos = await client.repo.list();

// For explicit cleanup, you can implement a custom pattern:
class BreadClient {
  private client: Bread;
  
  constructor() {
    this.client = new Bread();
  }
  
  async close() {
    // Cleanup if SDK provides close method
    // await this.client.close?.();
  }
}

// Usage with explicit cleanup
const clientWrapper = new BreadClient();
try {
  const repos = await clientWrapper.client.repo.list();
} finally {
  await clientWrapper.close();
}
```

</CodeGroup>

**Async Context Manager**:

<CodeGroup>

```python Python
from aibread import AsyncBread

async with AsyncBread() as client:
    repos = await client.repo.list()
# HTTP client is now closed
```

```typescript TypeScript
import Bread from '@aibread/sdk';

// TypeScript SDK is async by default
// Connections are managed automatically
const client = new Bread();
const repos = await client.repo.list();

// No explicit cleanup needed
```

</CodeGroup>

---

## Client Options Override

Modify client settings for a single request:

<CodeGroup>

```python Python
client = Bread()

# Override multiple options
response = client.with_options(
    timeout=5.0,
    max_retries=3,
    http_client=custom_client
).repo.list()
```

```typescript TypeScript
const client = new Bread();

// Override options per request (if SDK supports it)
const response = await client.repo.list({
  timeout: 5000,
  maxRetries: 3,
  // Custom HTTP client options
});
```

</CodeGroup>

---

## Type Handling

### Response Serialization

<CodeGroup>

```python Python
repo = client.repo.get("my_repo")

# Serialize to JSON
json_str = repo.to_json()  # Pretty-printed by default
compact_json = repo.to_json(indent=None)

# Convert to dictionary
data_dict = repo.to_dict()
data_with_api_names = repo.to_dict(use_api_names=True)
data_all_fields = repo.to_dict(exclude_unset=False)
```

```typescript TypeScript
const repo = await client.repo.get('my_repo');

// Serialize to JSON
const jsonStr = JSON.stringify(repo, null, 2);  // Pretty-printed
const compactJson = JSON.stringify(repo);  // Compact

// Convert to plain object (already a plain object in TypeScript)
const dataObj = { ...repo };

// Type-safe access
const repoName: string = repo.repo_name;
```

</CodeGroup>

### Check Fields Set

<CodeGroup>

```python Python
repo = client.repo.get("my_repo")

if 'base_model' not in repo.model_fields_set:
    print('base_model was not in API response')
```

```typescript TypeScript
const repo = await client.repo.get('my_repo');

// Check if field exists
if (!('base_model' in repo)) {
  console.log('base_model was not in API response');
}

// Type-safe check
if (repo.base_model === undefined) {
  console.log('base_model was not in API response');
}
```

</CodeGroup>

---

## Logging

Enable debug logging:

<CodeGroup>

```bash Python
export BREAD_LOG=debug
```

```bash TypeScript
export BREAD_LOG=debug
```

</CodeGroup>

Or in code:

<CodeGroup>

```python Python
import logging

logging.basicConfig(level=logging.DEBUG)
```

```typescript TypeScript
// Enable debug logging
process.env.BREAD_LOG = 'debug';

// Or use a logging library
import winston from 'winston';

const logger = winston.createLogger({
  level: 'debug',
  format: winston.format.json(),
});
```

</CodeGroup>

**Log Levels**:
- `info`: Basic request/response info
- `debug`: Detailed HTTP traffic

---

## Custom Base URL

Override API endpoint:

<CodeGroup>

```python Environment Variable
export BREAD_BASE_URL='https://api.custom-domain.com'
```

```python In Code
from aibread import Bread

client = Bread(
    base_url="https://api.custom-domain.com"
)
```

</CodeGroup>

---

## Default Headers and Query Params

Set default headers/query params for all requests:

<CodeGroup>

```python Python
from aibread import Bread

client = Bread(
    default_headers={"X-Custom": "header"},
    default_query={"param": "value"}
)
```

```typescript TypeScript
import Bread from '@aibread/sdk';

const client = new Bread({
  defaultHeaders: { 'X-Custom': 'header' },
  defaultQuery: { param: 'value' },
});
```

</CodeGroup>

---

## Version Check

Check installed SDK version:

<CodeGroup>

```python Python
import aibread

print(aibread.__version__)
```

```typescript TypeScript
import Bread from '@aibread/sdk';

console.log(Bread.version || 'Version not available');
// Or check package.json
// import packageJson from '@aibread/sdk/package.json';
// console.log(packageJson.version);
```

</CodeGroup>

---

## Async HTTP Client

For better async performance, use custom HTTP clients:

<CodeGroup>

```python Python
# Install aiohttp support
# pip install aibread[aiohttp]

from aibread import AsyncBread, DefaultAioHttpClient

async with AsyncBread(
    http_client=DefaultAioHttpClient()
) as client:
    repos = await client.repo.list()
```

```typescript TypeScript
// TypeScript SDK uses native fetch/async by default
import Bread from '@aibread/sdk';

// All methods are async by default
const client = new Bread();
const repos = await client.repo.list();

// For custom HTTP client, configure in client options
const customClient = new Bread({
  httpClient: {
    // Custom fetch implementation or HTTP library
  },
});
```

</CodeGroup>

---

## Best Practices

<AccordionGroup>
  <Accordion title="Use Context Managers" icon="brackets-curly">
    Always use context managers (`with` statements) to ensure proper cleanup
  </Accordion>

  <Accordion title="Configure Timeouts" icon="clock">
    Set appropriate timeouts based on your use case
  </Accordion>

  <Accordion title="Enable Logging" icon="file-lines">
    Use debug logging during development to understand API interactions
  </Accordion>

  <Accordion title="Handle Raw Responses Carefully" icon="shield">
    Validate and handle raw response data appropriately
  </Accordion>

  <Accordion title="Use Streaming for Large Data" icon="water">
    Stream responses when dealing with large datasets
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Error Handling"
    icon="triangle-exclamation"
    href="/sdk/guides/error-handling"
  >
    Comprehensive error handling guide
  </Card>
  <Card
    title="Production Patterns"
    icon="shield"
    href="/sdk/guides/production-patterns"
  >
    Production-ready workflow examples
  </Card>
</CardGroup>

