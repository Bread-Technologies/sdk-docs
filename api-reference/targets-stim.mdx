---
title: "Stimulus Generation (Stim)"
description: "Generate questions and tasks for model training"
---

## Overview

Stimulus (stim) generation creates questions, tasks, or prompts based on the target's generator configuration and teacher prompt. Stim generates scenarios where the expert behavior would be applied. Stim jobs execute asynchronously and their output is used as input for rollout jobs.

## Endpoints

### Run Stim Job

Start a stim job for the target.

**Endpoint**: `POST /v1/repo/{repo_name}/targets/{target_name}/stim`

**Request**:

```bash
curl -X POST "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim" \
  -H "Authorization: Bearer $BREAD_API_KEY"
```

<ParamField path="target_name" type="string" required>
  Target name
</ParamField>

<ParamField path="repo_name" type="string" required>
  Repository name
</ParamField>

**Prerequisites**:
- Target must have stim configuration (generators, teacher prompt, student prompt)

**Behavior**:
- Idempotent: repeated calls return current state (no duplicate jobs)
- Asynchronous: returns immediately, job runs in background

**Response**: `200 OK`

```json
{
  "status": "running",
  "lines": 0,
  "parameters": {}
}
```

**Response Fields**:
- `status`: `string` - Job status (not_started, running, complete)
- `lines`: `number` - Number of output lines generated
- `parameters`: `object` - Job parameters

---

### Get Stim Status

Get stim job status.

**Endpoint**: `GET /v1/repo/{repo_name}/targets/{target_name}/stim`

**Request**:

```bash
curl -X GET "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim" \
  -H "Authorization: Bearer $BREAD_API_KEY"
```

<ParamField path="target_name" type="string" required>
  Target name
</ParamField>

<ParamField path="repo_name" type="string" required>
  Repository name
</ParamField>

**Response**: `200 OK`

```json
{
  "status": "complete",
  "lines": 100,
  "parameters": {}
}
```

**Response Fields**:
- `status`: `string` - not_started | running | complete
- `lines`: `number` - Number of generated stimuli
- `parameters`: `object` - Job configuration

---

### Get Stim Output

Get paginated stim output data.

**Endpoint**: `GET /v1/repo/{repo_name}/targets/{target_name}/stim/output`

**Request**:

```bash
curl -X GET "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim/output?limit=100&offset=0" \
  -H "Authorization: Bearer $BREAD_API_KEY"
```

<ParamField path="target_name" type="string" required>
  Target name
</ParamField>

<ParamField path="repo_name" type="string" required>
  Repository name
</ParamField>

<ParamField path="limit" type="integer">
  Number of lines to return (max 1000)
</ParamField>

<ParamField path="offset" type="integer">
  Starting line number (0-indexed)
</ParamField>

**Response**: `200 OK`

```json
{
  "status": "complete",
  "lines": 1000,
  "offset": 0,
  "limit": 100,
  "has_more": true,
  "output": [
    "Write a function to reverse a string",
    "Implement binary search",
    "..."
  ],
  "parameters": {}
}
```

**Response Fields**:
- `status`: `string` - Job status
- `lines`: `number` - Total number of output lines
- `offset`: `number` - Starting line offset
- `limit`: `number` - Page size
- `has_more`: `boolean` - Whether more data is available
- `output`: `Array<string>` - List of generated stimuli
- `parameters`: `object` - Stim configuration

---

## Complete Workflow Example

<Steps>
  <Step title="Start Stim Job">
    ```bash
    curl -X POST "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim" \
      -H "Authorization: Bearer $BREAD_API_KEY"
    ```
  </Step>

  <Step title="Poll Status">
    ```bash
    # Poll status every 5 seconds
    while true; do
      response=$(curl -s -X GET "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim" \
        -H "Authorization: Bearer $BREAD_API_KEY")
      
      status=$(echo "$response" | jq -r '.status')
      lines=$(echo "$response" | jq -r '.lines')
      
      if [ "$status" = "complete" ]; then
        echo "Complete! Generated $lines stimuli"
        break
      elif [ "$status" = "running" ]; then
        echo "Still running... ($lines lines so far)"
      fi
      
      sleep 5
    done
    ```
  </Step>

  <Step title="Fetch Output">
    ```bash
    curl -X GET "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim/output?limit=100" \
      -H "Authorization: Bearer $BREAD_API_KEY"
    ```
  </Step>
</Steps>

## Pagination Example

Fetch all stim output with pagination:

```bash
#!/bin/bash

# Fetch all stim output
offset=0
limit=1000
all_output=()

while true; do
  response=$(curl -s -X GET "https://bapi.bread.com.ai/v1/repo/my_repo/targets/coding_target/stim/output?limit=$limit&offset=$offset" \
    -H "Authorization: Bearer $BREAD_API_KEY")
  
  # Extract output array
  output=$(echo "$response" | jq -r '.output[]')
  has_more=$(echo "$response" | jq -r '.has_more')
  
  # Process output
  while IFS= read -r line; do
    all_output+=("$line")
  done <<< "$output"
  
  if [ "$has_more" = "false" ]; then
    break
  fi
  
  offset=$((offset + limit))
done

echo "Total stimuli: ${#all_output[@]}"
```

## Job Status States

<CardGroup cols={3}>
  <Card title="not_started" icon="circle">
    Job has not begun execution
  </Card>
  <Card title="running" icon="circle-half-stroke">
    Job is currently executing
  </Card>
  <Card title="complete" icon="circle-check">
    Job finished successfully
  </Card>
</CardGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Poll Responsibly" icon="clock">
    Wait at least 5-10 seconds between status checks to avoid unnecessary API calls
  </Accordion>

  <Accordion title="Use Pagination" icon="books">
    Use pagination when fetching output to handle large datasets efficiently
  </Accordion>

  <Accordion title="Check Before Running" icon="magnifying-glass">
    Check job status before starting a new run to avoid conflicts
  </Accordion>

  <Accordion title="Handle Incomplete Jobs" icon="triangle-exclamation">
    Implement proper error handling for jobs that fail or stall
  </Accordion>
</AccordionGroup>

## Error Handling

### Not Found (404)

Target doesn't exist:

```bash
curl -X POST "https://bapi.bread.com.ai/v1/repo/my_repo/targets/nonexistent/stim" \
  -H "Authorization: Bearer $BREAD_API_KEY"
```

**Response**: `404 Not Found`

```json
{
  "error": "Target not found"
}
```

### Missing Configuration (400)

Target missing required stim configuration:

**Response**: `400 Bad Request`

```json
{
  "error": "Target must have generators and teacher prompt configured"
}
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Rollout Generation"
    icon="arrows-turn-right"
    href="/api-reference/targets-rollout"
  >
    Generate trajectories from stim output
  </Card>
  <Card
    title="SDK Quickstart"
    icon="code"
    href="/sdk/quickstart"
  >
    Use the SDK for programmatic control
  </Card>
</CardGroup>

