---
title: "Authentication"
description: "Configure API authentication for the Bread SDK"
---

## API Key Authentication

The Bread SDK uses API key authentication with Bearer token format. All requests include your API key in the `Authorization` header.

## Setting Your API Key

### Environment Variable (Recommended)

The SDK automatically reads from the `BREAD_API_KEY` environment variable:

```bash
export BREAD_API_KEY='your_api_key_here'
```

```python
from bread import Bread

# API key is read automatically from BREAD_API_KEY
client = Bread()
```

<Tip>
Using environment variables keeps credentials out of your source code and makes it easy to use different keys for development, staging, and production.
</Tip>

### Using .env Files

For local development, use [python-dotenv](https://pypi.org/project/python-dotenv/) to manage environment variables:

**1. Install python-dotenv:**
```bash
pip install python-dotenv
```

**2. Create a `.env` file:**
```bash .env
BREAD_API_KEY=your_api_key_here
BREAD_BASE_URL=http://localhost:8080  # Optional
```

**3. Load in your application:**
```python
from dotenv import load_dotenv
from bread import Bread

load_dotenv()  # Loads .env file

client = Bread()  # API key read from environment
```

<Warning>
Add `.env` to your `.gitignore` to prevent committing secrets to version control:
```bash .gitignore
.env
```
</Warning>

### Explicit API Key

You can also pass the API key directly when creating the client:

```python
from bread import Bread

client = Bread(api_key="your_api_key_here")
```

<Warning>
Avoid hardcoding API keys in source code. Use environment variables or secure secret management systems.
</Warning>

## Environment Variables

The SDK supports these environment variables:

| Variable | Description | Default |
|----------|-------------|---------|
| `BREAD_API_KEY` | API authentication key | Required |
| `BREAD_BASE_URL` | API base URL | `http://localhost:8080` |
| `BREAD_LOG` | Logging level (`info` or `debug`) | None |

### Custom Base URL

Override the default API endpoint:

```bash
export BREAD_BASE_URL='https://api.custom-domain.com'
```

Or in code:

```python
client = Bread(
    api_key="your_api_key",
    base_url="https://api.custom-domain.com"
)
```

## Authentication Errors

Handle authentication errors gracefully:

```python
import bread
from bread import Bread

client = Bread()

try:
    repos = client.repo.list()
except bread.AuthenticationError as e:
    print("Authentication failed - invalid API key")
    print(f"Error: {e}")
except bread.PermissionDeniedError as e:
    print("Permission denied - insufficient privileges")
    print(f"Error: {e}")
```

### Common Auth Errors

<CardGroup cols={2}>
  <Card title="401 - AuthenticationError" icon="lock">
    Invalid or missing API key
  </Card>
  <Card title="403 - PermissionDeniedError" icon="ban">
    Valid key but insufficient permissions for the resource
  </Card>
</CardGroup>

## Async Client Authentication

Authentication works the same way for async clients:

```python
import asyncio
from bread import AsyncBread

async def main():
    # API key from environment variable
    async with AsyncBread() as client:
        repos = await client.repo.list()
        print(repos.items)

asyncio.run(main())
```

## Best Practices

<AccordionGroup>
  <Accordion title="Use Environment Variables" icon="circle-check">
    Store API keys in environment variables, not in source code. This makes it easy to rotate keys and use different keys per environment.
  </Accordion>

  <Accordion title="Rotate Keys Regularly" icon="rotate">
    Periodically rotate your API keys to maintain security. Update the environment variable and restart your application.
  </Accordion>

  <Accordion title="Scope Keys Appropriately" icon="shield">
    If your API supports scoped keys, use the minimum permissions required for each application or service.
  </Accordion>

  <Accordion title="Never Commit Keys" icon="code-commit">
    Add `.env` and any files containing secrets to `.gitignore`. Use secret management systems in production.
  </Accordion>

  <Accordion title="Monitor Key Usage" icon="chart-line">
    Track API key usage to detect unauthorized access or anomalous behavior.
  </Accordion>
</AccordionGroup>

## Secret Management in Production

For production deployments, use secure secret management:

<CodeGroup>

```python AWS Secrets Manager
import boto3
from bread import Bread

def get_secret():
    client = boto3.client('secretsmanager', region_name='us-east-1')
    response = client.get_secret_value(SecretId='bread/api_key')
    return response['SecretString']

bread_client = Bread(api_key=get_secret())
```

```python Docker Secrets
import os
from bread import Bread

# Docker secret mounted at /run/secrets/bread_api_key
with open('/run/secrets/bread_api_key', 'r') as f:
    api_key = f.read().strip()

client = Bread(api_key=api_key)
```

```python Kubernetes Secrets
import os
from bread import Bread

# Kubernetes secret injected as environment variable
client = Bread(api_key=os.environ['BREAD_API_KEY'])
```

</CodeGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Quickstart"
    icon="rocket"
    href="/quickstart"
  >
    Start building with authenticated requests
  </Card>
  <Card
    title="Error Handling"
    icon="triangle-exclamation"
    href="/guides/error-handling"
  >
    Handle authentication and other errors
  </Card>
</CardGroup>

